<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Free Brainrots Hub ‚Äî Finder</title>
<style>
  :root{
    --bg:#071017;
    --card:#0d1a22;
    --accent:#8affff;
    --muted:#9fb4bf;
    --glow: 0 6px 24px rgba(138,255,255,0.06);
  }
  body{
    margin:0;
    font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto, Helvetica, Arial;
    background:linear-gradient(180deg,#061018 0%, #0b1720 100%);
    color: #e6f7f7;
    display:flex;
    min-height:100vh;
    align-items:center;
    justify-content:center;
    padding:24px;
  }
  .app{
    width:100%;
    max-width:980px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:14px;
    padding:20px;
    box-shadow:var(--glow);
    border:1px solid rgba(255,255,255,0.03);
  }
  header{display:flex;align-items:center;gap:16px;margin-bottom:12px;}
  h1{margin:0;font-size:20px}
  p.lead{margin:0;color:var(--muted);font-size:13px}
  .controls{display:flex;flex-wrap:wrap;gap:12px;margin-top:14px}
  .control{
    background:var(--card);
    padding:12px;
    border-radius:10px;
    min-width:220px;
    flex:1;
    border:1px solid rgba(255,255,255,0.02);
  }
  input[type="text"]{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.06);
    background:transparent;
    color:inherit;
    outline:none;
  }
  select{
    width:100%;
    padding:10px;
    border-radius:8px;
    border:1px solid rgba(255,255,255,0.06);
    background:transparent;
    color:inherit;
    outline:none;
  }
  .mutations{display:flex;gap:8px;flex-wrap:wrap;padding-top:8px}
  .mutations label{font-size:13px;color:var(--muted)}
  button{
    padding:10px 16px;
    border-radius:10px;
    border:none;
    cursor:pointer;
    background:linear-gradient(90deg,var(--accent),#7affd6);
    color:#012;
    font-weight:600;
    box-shadow:0 6px 18px rgba(0,0,0,0.4);
  }
  .info{
    margin-top:14px;
    display:flex;
    gap:12px;
    align-items:center;
    flex-wrap:wrap;
  }
  .chip{
    background:rgba(255,255,255,0.03);
    padding:10px;
    border-radius:10px;
    min-width:180px;
    border:1px solid rgba(255,255,255,0.02);
  }
  .result{
    margin-top:14px;
    padding:14px;
    border-radius:10px;
    background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
    border:1px solid rgba(255,255,255,0.02);
    min-height:54px;
    display:flex;
    align-items:center;
    gap:12px;
  }
  .loading{font-size:14px;color:var(--muted)}
  .unavailable{color:#ff98a8;font-weight:700}
  .success{color:#bfffb8;font-weight:700}
  .small{font-size:12px;color:var(--muted)}
  .footer-note{margin-top:12px;color:var(--muted);font-size:12px}
  .row{display:flex;gap:12px;align-items:center}
  @keyframes spinner {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }
  .spinner{
    width:20px;height:20px;border-radius:50%;
    border:3px solid rgba(255,255,255,0.08);
    border-top-color:var(--accent);
    animation:spinner 1s linear infinite;
  }
  .topbar{display:flex;justify-content:space-between;gap:12px;align-items:center}
  .sortToggle{display:flex;align-items:center;gap:8px;color:var(--muted);font-size:13px}
  .mutations input{transform:scale(1.1)}
  .note-rare{font-size:12px;color:#ffd480}
  /* responsive */
  @media (max-width:700px){
    .controls{flex-direction:column}
    .control{min-width:unset}
  }
</style>
</head>
<body>
  <div class="app" role="main" aria-labelledby="title">
    <header>
      <div>
        <h1 id="title">üß† Free Brainrots Finder</h1>
        <p class="lead">Choose a brainrot, check mutations, search names, and try your luck ‚Äî 30% chance to get redirected.</p>
      </div>
      <div style="margin-left:auto;text-align:right">
        <div class="small">Redirect link: <span class="note-rare">roblox.com/privatelink/123456787654321</span></div>
      </div>
    </header>

    <div class="topbar small" style="margin-top:8px">
      <div class="sortToggle">
        <label><input type="checkbox" id="toggleSort" checked /> Sort by rarity (desc)</label>
      </div>
      <div class="small">Rarity order: <strong>OG ‚Üí Brainrot God ‚Üí Legendary ‚Üí Secret ‚Üí Epic ‚Üí Rare ‚Üí Common ‚Üí Unknown</strong></div>
    </div>

    <div class="controls" style="margin-top:12px">
      <div class="control">
        <label class="small">Search by name</label>
        <input id="searchInput" type="text" placeholder="Type a brainrot name (live filter)" />
      </div>

      <div class="control">
        <label class="small">Pick a brainrot</label>
        <select id="brainrotSelect" size="8" style="height:260px"></select>
      </div>

      <div class="control" style="min-width:200px;flex:0 0 260px">
        <label class="small">Mutations (optional)</label>
        <div class="mutations">
          <label><input type="checkbox" class="mut" value="MutA" /> MutA</label>
          <label><input type="checkbox" class="mut" value="MutB" /> MutB</label>
          <label><input type="checkbox" class="mut" value="MutC" /> MutC</label>
        </div>

        <div style="margin-top:12px;display:flex;gap:8px">
          <button id="searchBtn">Search</button>
          <button id="showInfo" style="background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted)">Show Info</button>
        </div>
      </div>
    </div>

    <div class="info">
      <div class="chip" id="selectedName">Selected: ‚Äî</div>
      <div class="chip" id="selectedRarity">Rarity: ‚Äî</div>
      <div class="chip" id="selectedIncome">Income/sec: ‚Äî</div>
      <div class="chip small">Total brainrots loaded: <span id="totalCount">0</span></div>
    </div>

    <div class="result" id="resultArea">
      <div id="resultMsg" style="flex:1">No search yet. Pick or search a brainrot and click <strong>Search</strong>.</div>
      <div id="resultMeta"></div>
    </div>

    <div class="footer-note">
      Tip: click a name in the list to select it. Use the search box to filter instantly. You can deselect sorting if you want alphabetical only.
    </div>
  </div>

<script>
/* -------------------------
  Data extracted from parts 1-3 (Name, Rarity, Income)
  (Kept exactly as you provided, descriptions omitted)
  ------------------------- */

const brainrots = [
  /* PART 1 */
  {name:"Strawberry Elephant", rarity:"OG", income:"$300.0M"},
  {name:"Meowl", rarity:"OG", income:"$275.0M"},
  {name:"Headless Horseman", rarity:"Secret", income:"$175.0M"},
  {name:"Capitano Moby", rarity:"Secret", income:"$160.0M"},
  {name:"Burguro And Fryuro", rarity:"Secret", income:"$150.0M"},
  {name:"La Secret Combinasion", rarity:"Secret", income:"$125.0M"},
  {name:"Dragon Cannelloni", rarity:"Secret", income:"$100.0M"},
  {name:"La Casa Boo", rarity:"Secret", income:"$100.0M"},
  {name:"Fragrama and Chocrama", rarity:"Secret", income:"$100.0M"},
  {name:"Spooky and Pumpky", rarity:"Secret", income:"$80.0M"},
  {name:"Los Spaghettis", rarity:"Secret", income:"$70.0M"},
  {name:"Spaghetti Tualetti", rarity:"Secret", income:"$60.0M"},
  {name:"Garama and Madundung", rarity:"Secret", income:"$50.0M"},
  {name:"Ketchuru and Musturu", rarity:"Secret", income:"$42.5M"},
  {name:"La Supreme Combinasion", rarity:"Secret", income:"$40.0M"},
  {name:"Tictac Sahur", rarity:"Secret", income:"$37.5M"},
  {name:"Ketupat Kepat", rarity:"Secret", income:"$35.0M"},
  {name:"La Taco Combinasion", rarity:"Secret", income:"$35.0M"},
  {name:"Tang Tang Keletang", rarity:"Secret", income:"$33.5M"},
  {name:"Los Tacoritas", rarity:"Secret", income:"$32.0M"},
  {name:"Eviledon", rarity:"Secret", income:"$31.5M"},
  {name:"Los Primos", rarity:"Secret", income:"$31.0M"},
  {name:"Esok Sekolah", rarity:"Secret", income:"$30.0M"},
  {name:"Chillin Chili", rarity:"Secret", income:"$30.0M"},
  {name:"Los Puggies", rarity:"Secret", income:"$30.0M"},
  {name:"Tralaledon", rarity:"Secret", income:"$27.5M"},
  {name:"Mieteteira Chicleteira", rarity:"Secret", income:"$26.0M"},
  {name:"Chipso and Queso", rarity:"Secret", income:"$25.0M"},
  {name:"La Spooky Grande", rarity:"Secret", income:"$24.5M"},
  {name:"Los Bros", rarity:"Secret", income:"$24.0M"},
  {name:"La Extinct Grande", rarity:"Secret", income:"$23.5M"},
  {name:"Celularcini Viciosini", rarity:"Secret", income:"$22.5M"},
  {name:"Los 67", rarity:"Secret", income:"$22.5M"},
  {name:"Los Mobilis", rarity:"Secret", income:"$22.0M"},
  {name:"Money Money Puggy", rarity:"Secret", income:"$21.0M"},
  {name:"Los Hotspotsitos", rarity:"Secret", income:"$20.0M"},
  {name:"Los Spooky Combinasionas", rarity:"Secret", income:"$20.0M"},
  {name:"Las Sis", rarity:"Secret", income:"$17.5M"},
  {name:"Tacorita Bicicleta", rarity:"Secret", income:"$16.5M"},
  {name:"Nuclearo Dinossauro", rarity:"Secret", income:"$15.0M"},
  {name:"Los Combinasionas", rarity:"Secret", income:"$15.0M"},
  {name:"Mariachi Corazoni", rarity:"Secret", income:"$12.5M"},
  {name:"La Grande Combinasion", rarity:"Secret", income:"$10.0M"},
  {name:"67", rarity:"Secret", income:"$7.5M"},
  {name:"Los Chicleteiras", rarity:"Secret", income:"$7.0M"},
  {name:"Guest 666", rarity:"Secret", income:"$6.7M"},
  {name:"Rang Ring Bus", rarity:"Secret", income:"$6.0M"},
  {name:"Los Nooo My Hotspotsitos", rarity:"Secret", income:"$5.5M"},
  {name:"Noo My Candy", rarity:"Secret", income:"$5.0M"},
  {name:"Chicleteirina Bicicleteirina", rarity:"Secret", income:"$4.0M"},
  {name:"Burrito Bandito", rarity:"Secret", income:"$4.0M"},
  {name:"Chicleteira Bicicleteira", rarity:"Secret", income:"$3.5M"},
  {name:"Quesadillo Vampiro", rarity:"Secret", income:"$3.5M"},
  {name:"Quesadilla Crocodila", rarity:"Secret", income:"$3.0M"},
  {name:"Pot Pumpkin", rarity:"Secret", income:"$3.0M"},
  {name:"Horegini Boom", rarity:"Secret", income:"$2.7M"},
  {name:"Pot Hotspot", rarity:"Secret", income:"$2.5M"},
  {name:"Pirulitoita Bicicleteira", rarity:"Secret", income:"$2.5M"},
  {name:"To to to Sahur", rarity:"Secret", income:"$2.2M"},
  {name:"La Sahur Combinasion", rarity:"Secret", income:"$2.0M"},
  {name:"Telemorte", rarity:"Secret", income:"$2.0M"},
  {name:"Noo My Examine", rarity:"Secret", income:"$1.7M"},
  {name:"Nooo My Hotspot", rarity:"Secret", income:"$1.5M"},
  {name:"Los Jobcitos", rarity:"Secret", income:"$1.5M"},
  {name:"1x1x1x1", rarity:"Secret", income:"$1.1M"},
  {name:"Graipuss Medussi", rarity:"Secret", income:"$1.0M"},
  {name:"Perrito Burrito", rarity:"Secret", income:"$1.0M"},
  {name:"Trickolino", rarity:"Secret", income:"$900.0K"},
  {name:"La Vacca Jacko Linterino", rarity:"Secret", income:"$850.0K"},
  {name:"Las Vaquitas Saturnitas", rarity:"Secret", income:"$750.0K"},
  {name:"Los Karkeritos", rarity:"Secret", income:"$750.0K"},
  {name:"Karker Sahur", rarity:"Secret", income:"$725.0K"},
  {name:"job job job Sahur", rarity:"Secret", income:"$700.0K"},
  {name:"Frankentteo", rarity:"Secret", income:"$700.0K"},
  {name:"Las Tralaleritas", rarity:"Secret", income:"$650.0K"},
  {name:"Pumpkini Spyderini", rarity:"Secret", income:"$650.0K"},
  {name:"Extinct Matteo", rarity:"Brainrot God", income:"$625.0K"},
  {name:"La Karkerkar Combinasion", rarity:"Secret", income:"$600.0K"},
  {name:"Yess My Examine", rarity:"Secret", income:"$575.0K"},
  {name:"Guerriro Digitale", rarity:"Secret", income:"$550.0K"},
  {name:"Boatito Auratito", rarity:"Secret", income:"$525.0K"},

  /* PART 2 */
  {name:"Los Tralaleritos", rarity:"Secret", income:"$500.0K"},
  {name:"Los Tortus", rarity:"Secret", income:"$500.0K"},
  {name:"Zombie Tralala", rarity:"Secret", income:"$500.0K"},
  {name:"Vulturino Skeletono", rarity:"Secret", income:"$500.0K"},
  {name:"La Cucaracha", rarity:"Secret", income:"$475.0K"},
  {name:"Extinct Tralalero", rarity:"Brainrot God", income:"$450.0K"},
  {name:"Fragola La La La", rarity:"Secret", income:"$450.0K"},
  {name:"Los Spyderinis", rarity:"Secret", income:"$425.0K"},
  {name:"Agarini la Palini", rarity:"Secret", income:"$425.0K"},
  {name:"Blackhole Goat", rarity:"Secret", income:"$400.0K"},
  {name:"Chachechi", rarity:"Secret", income:"$400.0K"},
  {name:"Dul Dul Dul", rarity:"Secret", income:"$375.0K"},
  {name:"Torrtuginni Dragonfrutini", rarity:"Secret", income:"$350.0K"},
  {name:"Chimpanzini Spiderini", rarity:"Secret", income:"$325.0K"},
  {name:"Sammyni Spyderini", rarity:"Secret", income:"$325.0K"},
  {name:"Jackorilla", rarity:"Secret", income:"$315.0K"},
  {name:"Trenostruzzo Turbo 4000", rarity:"Secret", income:"$310.0K"},
  {name:"La Vacca Saturno Saturnita", rarity:"Secret", income:"$300.0K"},
  {name:"Karkerkar Kurkur", rarity:"Secret", income:"$300.0K"},
  {name:"Los Matteos", rarity:"Secret", income:"$300.0K"},
  {name:"Bisonte Giuppitere", rarity:"Secret", income:"$300.0K"},
  {name:"Pop Pop Sahur", rarity:"Brainrot God", income:"$295.0K"},
  {name:"Tentacolo Tecnico", rarity:"Brainrot God", income:"$292.5K"},
  {name:"Belula Beluga", rarity:"Brainrot God", income:"$290.0K"},
  {name:"Krupuk Pagi Pagi", rarity:"Brainrot God", income:"$290.0K"},
  {name:"Skull Skull Skull", rarity:"Brainrot God", income:"$290.0K"},
  {name:"Brasilini Berimbini", rarity:"Brainrot God", income:"$285.0K"},
  {name:"Cappuccino Clownino", rarity:"Brainrot God", income:"$285.0K"},
  {name:"Anpali Babel", rarity:"Brainrot God", income:"$280.0K"},
  {name:"Noo La Polizia", rarity:"Brainrot God", income:"$280.0K"},
  {name:"Mastodontico Telepiedone", rarity:"Brainrot God", income:"$275.0K"},
  {name:"Bambu Bambu Sahur", rarity:"Brainrot God", income:"$275.0K"},
  {name:"Piccionetta Machina", rarity:"Brainrot God", income:"$270.0K"},
  {name:"Frio Ninja", rarity:"Brainrot God", income:"$265.0K"},
  {name:"Los Tipi Tacos", rarity:"Brainrot God", income:"$260.0K"},
  {name:"Dug dug dug", rarity:"Brainrot God", income:"$255.0K"},
  {name:"Tartaruga Cisterna", rarity:"Brainrot God", income:"$250.0K"},
  {name:"Corn Corn Corn Sahur", rarity:"Brainrot God", income:"$250.0K"},
  {name:"Squalanana", rarity:"Brainrot God", income:"$250.0K"},
  {name:"Snailenzo", rarity:"Brainrot God", income:"$250.0K"},
  {name:"Mummy Ambalabu", rarity:"Brainrot God", income:"$250.0K"},
  {name:"Aquanaut", rarity:"Brainrot God", income:"$245.0K"},
  {name:"Cacasito Satalito", rarity:"Brainrot God", income:"$240.0K"},
  {name:"Orcalita Orcala", rarity:"Brainrot God", income:"$240.0K"},
  {name:"Crabbo Limonetta", rarity:"Brainrot God", income:"$235.0K"},
  {name:"Los Orcalitos", rarity:"Brainrot God", income:"$235.0K"},
  {name:"Tractoro Dinosauro", rarity:"Brainrot God", income:"$230.0K"},
  {name:"Piccione Macchina", rarity:"Brainrot God", income:"$225.0K"},
  {name:"Bombardini Tortinii", rarity:"Brainrot God", income:"$225.0K"},
  {name:"Brrr es Teh Patipum", rarity:"Brainrot God", income:"$225.0K"},
  {name:"Pakrahmatmatina", rarity:"Brainrot God", income:"$225.0K"},
  {name:"Los Bombinitos", rarity:"Brainrot God", income:"$220.0K"},
  {name:"Pakrahmatmamat", rarity:"Brainrot God", income:"$215.0K"},
  {name:"Los Tungtungtungcitos", rarity:"Brainrot God", income:"$210.0K"},
  {name:"Bulbito Bandito Traktorito", rarity:"Brainrot God", income:"$205.0K"},
  {name:"Ballerino Lololo", rarity:"Brainrot God", income:"$200.0K"},
  {name:"Las Capuchinas", rarity:"Brainrot God", income:"$185.0K"},

  /* PART 3 */
  {name:"Mummio Rappitto", rarity:"Epic", income:"$325"},
  {name:"Chimpanzini Bananini", rarity:"Legendary", income:"$300"},
  {name:"Penguino Cocosino", rarity:"Epic", income:"$300"},
  {name:"Wombo Rollo", rarity:"Epic", income:"$275"},
  {name:"Doi Doi Do", rarity:"Epic", income:"$260"},
  {name:"Salamino Penguino", rarity:"Epic", income:"$250"},
  {name:"Frogato Pirato", rarity:"Epic", income:"$240"},
  {name:"Mangolini Parrocini", rarity:"Epic", income:"$235"},
  {name:"Avocadini Guffo", rarity:"Epic", income:"$225"},
  {name:"Ti Ti Ti Sahur", rarity:"Epic", income:"$225"},
  {name:"Burbaloni Loliloli", rarity:"Legendary", income:"$200"},
  {name:"Brri Brri Bicus Dicus Bombicus", rarity:"Epic", income:"$175"},
  {name:"Perochello Lemonchello", rarity:"Epic", income:"$160"},
  {name:"Bananita Dolphinita", rarity:"Epic", income:"$150"},
  {name:"Malame Amarele", rarity:"Epic", income:"$140"},
  {name:"Bambini Crostini", rarity:"Epic", income:"$130"},
  {name:"Trulimero Trulicina", rarity:"Epic", income:"$125"},
  {name:"Avocadini Antilopini", rarity:"Epic", income:"$115"},
  {name:"Brr Brr Patapim", rarity:"Epic", income:"$100"},
  {name:"Bandito Axolito", rarity:"Epic", income:"$90"},
  {name:"Cappuccino Assassino", rarity:"Epic", income:"$75"},
  {name:"Pinealotto Fruttarino", rarity:"Rare", income:"$75"},
  {name:"Pipi Avocado", rarity:"Rare", income:"$70"},
  {name:"Tric Trac Baraboom", rarity:"Rare", income:"$65"},
  {name:"Cupcake Koala", rarity:"Rare", income:"$60"},
  {name:"Ta Ta Ta Ta Sahur", rarity:"Rare", income:"$55"},
  {name:"Cacto Hipopotamo", rarity:"Rare", income:"$50"},
  {name:"Boneca Ambalabu", rarity:"Rare", income:"$40"},
  {name:"Bandito Bobritto", rarity:"Rare", income:"$35"},
  {name:"Gangster Footera", rarity:"Rare", income:"$30"},
  {name:"Tung Tung Tung Sahur", rarity:"Rare", income:"$25"},
  {name:"Trippi Troppi", rarity:"Rare", income:"$15"},
  {name:"Pipi Corni", rarity:"Common", income:"$14"},
  {name:"Pipi Kiwi", rarity:"Common", income:"$13"},
  {name:"Tartaragno", rarity:"Common", income:"$13"},
  {name:"Raccooni Jandelini", rarity:"Common", income:"$12"},
  {name:"Svinina Bombardino", rarity:"Common", income:"$10"},
  {name:"Talpa Di Fero", rarity:"Common", income:"$9"},
  {name:"Fluriflura", rarity:"Common", income:"$7"},
  {name:"Tim Cheese", rarity:"Common", income:"$5"},
  {name:"Liril√¨ Laril√†", rarity:"Common", income:"$3"},
  {name:"Noobini Pizzanini", rarity:"Common", income:"$1"},
  {name:"Cooki and Milki", rarity:"Secret", income:"$0"},
  {name:"Saphiri Ramiri", rarity:"Unknown", income:"$0"},
  {name:"Piccione Tostatino", rarity:"Unknown", income:"$0"},
  {name:"Gatto CaneMais", rarity:"Unknown", income:"$0"},
  {name:"Rana Paninone", rarity:"Unknown", income:"$0"},
  {name:"Bobrini Cococosini", rarity:"Unknown", income:"$0"},
  {name:"Pippi Poppa Pippo Peppe", rarity:"Unknown", income:"$0"},
  {name:"Smurf Cat", rarity:"Unknown", income:"$0"},
  {name:"Cabrospaghetto Mystico", rarity:"Unknown", income:"$0"},
  {name:"Kravelino Cekicino", rarity:"Unknown", income:"$0"},
  {name:"Crocodillo Ananasinno", rarity:"Unknown", income:"$0"},
  {name:"Centuzzarella Croccantini", rarity:"Unknown", income:"$0"},
  {name:"Los Spideritos", rarity:"Unknown", income:"$0"},
  {name:"Koala Cornetto", rarity:"Unknown", income:"$0"},
  {name:"Orso Scavatore", rarity:"Unknown", income:"$0"},
  {name:"Mattonino Cornettino", rarity:"Unknown", income:"$0"},
  {name:"Orso Melaroso", rarity:"Unknown", income:"$0"},
  {name:"Topinello Fruttarello", rarity:"Unknown", income:"$0"},
  {name:"Pulcino Limoncino", rarity:"Unknown", income:"$0"},
  {name:"Cagnorrito Ripienino", rarity:"Unknown", income:"$0"},
  {name:"Gelatuzzo Pinguinello", rarity:"Unknown", income:"$0"}
];

/* -------------------------
  Rarity ordering for sorting
  Higher index => higher priority (we'll sort descending)
  OG > Brainrot God > Legendary > Secret > Epic > Rare > Common > Unknown
------------------------- */
const rarityRank = {
  "OG":8,
  "Brainrot God":7,
  "Legendary":6,
  "Secret":5,
  "Epic":4,
  "Rare":3,
  "Common":2,
  "Unknown":1
};

/* DOM references */
const selectEl = document.getElementById('brainrotSelect');
const searchInput = document.getElementById('searchInput');
const toggleSort = document.getElementById('toggleSort');
const selectedName = document.getElementById('selectedName');
const selectedRarity = document.getElementById('selectedRarity');
const selectedIncome = document.getElementById('selectedIncome');
const totalCount = document.getElementById('totalCount');
const resultMsg = document.getElementById('resultMsg');
const searchBtn = document.getElementById('searchBtn');
const showInfoBtn = document.getElementById('showInfo');

let currentList = [...brainrots]; // filtered list
let selectedIndex = 0;

/* Utility: sort list according to toggle */
function sortList(list){
  const byRarity = toggleSort.checked;
  return list.slice().sort((a,b)=>{
    if(byRarity){
      const ra = rarityRank[a.rarity]||0;
      const rb = rarityRank[b.rarity]||0;
      if(rb !== ra) return rb - ra; // descending rarity
      // if same rarity, sort by income numeric decreasing
      const na = parseIncomeNumber(a.income);
      const nb = parseIncomeNumber(b.income);
      if(nb !== na) return nb - na;
      return a.name.localeCompare(b.name);
    } else {
      return a.name.localeCompare(b.name);
    }
  });
}

/* parse incomes like "$300.0M", "$900.0K", "$325" into numeric (units: dollars)
   We won't rely on exact math for display, just for sorting. */
function parseIncomeNumber(s){
  if(!s) return 0;
  const t = String(s).trim().replace(/\$/g,'');
  // handle M, K
  const match = t.match(/^([\d.,]+)\s*([MK]?)$/i);
  if(match){
    let num = parseFloat(match[1].replace(/,/g,''));
    const suf = (match[2]||'').toUpperCase();
    if(suf==='M') return num * 1_000_000;
    if(suf==='K') return num * 1_000;
    return num;
  }
  // default fallback
  const n = parseFloat(t.replace(/,/g,''));
  return isNaN(n) ? 0 : n;
}

/* render options */
function renderOptions(list){
  selectEl.innerHTML = '';
  const sorted = sortList(list);
  sorted.forEach((b,i)=>{
    const opt = document.createElement('option');
    opt.value = i;
    opt.textContent = `${b.name} ‚Äî ${b.rarity} ‚Äî ${b.income}`;
    opt.dataset.name = b.name;
    opt.dataset.rarity = b.rarity;
    opt.dataset.income = b.income;
    selectEl.appendChild(opt);
  });
  totalCount.textContent = list.length;
  // select first if available
  if(sorted.length>0){
    selectedIndex = 0;
    selectEl.selectedIndex = 0;
    updateSelectedDisplay(sorted[0]);
  } else {
    selectedIndex = -1;
    updateSelectedDisplay(null);
  }
}

/* update display area for selected */
function updateSelectedDisplay(item){
  if(!item){
    selectedName.textContent = "Selected: ‚Äî";
    selectedRarity.textContent = "Rarity: ‚Äî";
    selectedIncome.textContent = "Income/sec: ‚Äî";
    return;
  }
  selectedName.textContent = "Selected: " + item.name;
  selectedRarity.textContent = "Rarity: " + item.rarity;
  selectedIncome.textContent = "Income/sec: " + item.income;
}

/* filter when typing */
searchInput.addEventListener('input', ()=>{
  const q = searchInput.value.trim().toLowerCase();
  currentList = brainrots.filter(b => b.name.toLowerCase().includes(q));
  renderOptions(currentList);
});

/* toggle sort re-render */
toggleSort.addEventListener('change', ()=> renderOptions(currentList));

/* click on select to update selected */
selectEl.addEventListener('change', ()=>{
  const idx = selectEl.selectedIndex;
  if(idx<0) return;
  // because options are built from sorted list, pick sorted array
  const sorted = sortList(currentList);
  const item = sorted[idx];
  selectedIndex = idx;
  updateSelectedDisplay(item);
});

/* show info button reveals more details briefly */
showInfoBtn.addEventListener('click', ()=>{
  const idx = selectEl.selectedIndex;
  if(idx<0){ resultMsg.textContent = "No brainrot selected."; return; }
  const item = sortList(currentList)[idx];
  resultMsg.innerHTML = `<div><strong>${item.name}</strong> ‚Äî <span class="small">${item.rarity}</span> ‚Äî <span class="small">${item.income}</span></div>`;
});

/* Search button: do loading, then 70% unavailable / 30% redirect */
searchBtn.addEventListener('click', ()=>{
  const idx = selectEl.selectedIndex;
  if(idx<0){ resultMsg.textContent = "Please select a brainrot first."; return; }
  const item = sortList(currentList)[idx];

  // show income immediately
  updateSelectedDisplay(item);

  // show loading
  resultMsg.innerHTML = '';
  const left = document.createElement('div');
  left.style.display='flex'; left.style.alignItems='center'; left.style.gap='12px';
  const spinner = document.createElement('div'); spinner.className='spinner';
  const txt = document.createElement('div'); txt.className='loading'; txt.textContent='Searching for brainrots...';
  left.appendChild(spinner); left.appendChild(txt);
  resultMsg.appendChild(left);

  // simulate 2.2-3.2s load
  const delay = 2200 + Math.floor(Math.random()*1000);
  setTimeout(()=>{
    // selection: 70% unavailable, 30% success
    const chance = Math.random();
    if(chance < 0.7){
      // unavailable
      resultMsg.innerHTML = `<div class="unavailable">‚ùå Brainrot unavailable, try another one.</div>`;
    } else {
      // success -> show success text then redirect
      resultMsg.innerHTML = `<div class="success">‚úÖ Found! Redirecting to private link for <strong>${item.name}</strong>‚Ä¶</div>`;
      // small safety delay so user sees success
      setTimeout(()=> {
        window.location.href = "https://roblox.com/privatelink/123456787654321";
      }, 900);
    }
  }, delay);
});

/* keyboard: Enter in searchInput triggers selecting first and Search */
searchInput.addEventListener('keydown', (e)=>{
  if(e.key === 'Enter'){
    // pick first filtered option if present
    if(selectEl.options.length>0){
      selectEl.selectedIndex = 0;
      selectEl.dispatchEvent(new Event('change'));
      searchBtn.click();
    }
  }
});

/* initial render */
currentList = [...brainrots];
renderOptions(currentList);

/* utility: allow clicking option text to copy link (middle click) */
selectEl.addEventListener('dblclick', ()=>{
  const idx = selectEl.selectedIndex;
  if(idx<0) return;
  const item = sortList(currentList)[idx];
  navigator.clipboard?.writeText(`roblox.com/privatelink/123456787654321`).then(()=> {
    resultMsg.innerHTML = `<div class="small">Private link copied to clipboard for ${item.name}.</div>`;
  }).catch(()=> {
    resultMsg.innerHTML = `<div class="small">Could not copy ‚Äî open the private link manually: roblox.com/privatelink/123456787654321</div>`;
  });
});

</script>
</body>
</html>
